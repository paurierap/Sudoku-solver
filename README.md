# Sudoku Generator and Solver

A C++ implementation of a Sudoku generator and solver. It generates valid Sudoku puzzles of varying difficulty and solves them using either naive or Minimum Remaining Values (MRV) heuristic-based backtracking.

## Features

- Lightweight `Sudoku` class stores values using `int` bitmaps for each row, column and sub-box. Bitwise operations on the trailing 9 bits determine the value of a cell.
- Sudoku boards can be generated with 4 different difficulties: `easy`, `medium`, `hard` and `expert`. These are generated by randomly filling a board, and removing cells according to a clue number that determines difficulty.
- Generated sudokus are valid and have a unique solution.
- Two algorithms are available for solving:
  - Naive backtracking: every empty cell is visited and all 9 digits are tested. 
  - Minimum Remaining Values (MRV) heuristic: the next cell is chosen according to the one with least valid candidates. Performance is around x10 compared to the previous.
- Performance measurement uses a lightweight `Timer` utility.
- Pretty-print puzzles to the terminal by overloading the `operator<<`.

## Build Instructions

### Requirements
- C++17 or later
- CMake (3.14+)
- A standard C++ compiler (g++, clang++, MSVC)

### Steps

1. Create a `main.cpp` file in the project root.  This file should include your `Sudoku` header and contain a `main()` function (see [Usage](#usage)).
2. Configure the build system with `CMake` (this will generate the `Makefiles`):
```console
Sudoku-solver$ cmake -S . -B build
-- The C compiler identification is AppleClang 14.0.0.14000029
-- The CXX compiler identification is AppleClang 14.0.0.14000029
...
-- Build files have been written to: .../Sudoku-solver/build
```
3. Build the project (example target name `sudoku_app`):
```console
Sudoku-solver$ cd build 
Sudoku-solver/build$ make sudoku_app
[ 50%] Building CXX object CMakeFiles/sudoku_app.dir/main.cpp.o
[100%] Linking CXX executable sudoku_app
[100%] Built target sudoku_app
```
4. Run the executable
```console
Sudoku-solver/build$ ./sudoku_app
```

## Usage

Some examples of code to use in your `main.cpp`.

### Random or chosen difficulty
```cpp
#include "Sudoku.hpp"

int main() {

    // An easy and a random sudoku:
    Sudoku sudoku_chosen("easy"), sudoku_random;
    std::cout << sudoku_chosen << sudoku_random;

    sudoku_chosen.solve("MRV");
    sudoku_random.solve("MRV");

    std::cout << sudoku_chosen << sudoku_random;
}
```

### From a given board

Here, 0's are treated as empty spaces. For example:

```cpp
#include "Sudoku.hpp"
#include <vector>

std::vector<std::vector<int>> board = {
    {5,3,0, 0,7,0, 0,0,0},
    {6,0,0, 1,9,5, 0,0,0},
    ...
}

Sudoku sudoku(board);
```

## Performance

Typical timings without compiler optimization:
- Puzzle generation is around 10 ms.
- Solving (depending on difficulty):
  - Naive backtracking is around 500-1000 µs.
  - MRV backtracking is around 30-100 µs.
  
Performance may vary depending on compiler, optimisation flags (e.g., `-O3`), and hardware.

## Note

Sudoku generation is accomplished by first creating a complete, solved board by randomly filling rows, columns, and sub-boxes with valid values. After the board has been filled, cells are randomly removed (reducing the number of given clues). For each removal, the board is re-solved with that cell missing to ensure uniqueness of the solution. If the board admits multiple solutions, the removal is undone and another cell is tested.

The number of clues at the end depends on the difficulty:
- `easy`: 40-45 clues.
- `medium`: 32-39 clues.
- `hard`: 25-31 clues.
- `expert`: *typically* 17-24 clues. 

Expert difficulty is especially challenging. Since each removal must preserve uniqueness, it is common that the final number of clues remains above the target range. To handle this, the program retries up to 10 times. If the target difficulty cannot be achieved (most often for `expert`), the closest matching difficulty is applied instead, and the last valid board is used. This balances performance with generating realistic puzzles.